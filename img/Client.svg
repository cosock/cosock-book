<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="712px" preserveAspectRatio="none" style="width:476px;height:712px;background:#FFFFFF;" version="1.1" viewBox="0 0 476 712" width="476px" zoomAndPan="magnify"><defs/><g><rect height="217.9297" style="stroke:#000000;stroke-width:1.5;fill:none;" width="460" x="10" y="441.8906"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="36.2969" y2="676.8203"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="219" x2="219" y1="36.2969" y2="676.8203"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="382" x2="382" y1="36.2969" y2="676.8203"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="27" y="24.9951">server task</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="20" y="675.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="27" y="695.8154">server task</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="187" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="194" y="24.9951">cosock</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="187" y="675.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="194" y="695.8154">cosock</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="340" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="347" y="24.9951">client task</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="340" y="675.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="347" y="695.8154">client task</text><polygon fill="#181818" points="370,63.4297,380,67.4297,370,71.4297,374,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="376" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="226" y="62.3638">resume</text><polygon fill="#181818" points="230,92.5625,220,96.5625,230,100.5625,226,96.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="224" x2="381" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="236" y="91.4966">channel:receive(yield)</text><polygon fill="#181818" points="76,121.6953,66,125.6953,76,129.6953,72,125.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70" x2="218" y1="125.6953" y2="125.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="82" y="120.6294">resume</text><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="107" y1="154.8281" y2="154.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="107" x2="107" y1="154.8281" y2="167.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="107" y1="167.8281" y2="167.8281"/><polygon fill="#181818" points="76,163.8281,66,167.8281,76,171.8281,72,167.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="72" y="149.7622">bind</text><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="107" y1="196.9609" y2="196.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="107" x2="107" y1="196.9609" y2="209.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="107" y1="209.9609" y2="209.9609"/><polygon fill="#181818" points="76,205.9609,66,209.9609,76,213.9609,72,209.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="72" y="191.895">server:getsockname</text><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="107" y1="239.0938" y2="239.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="107" x2="107" y1="239.0938" y2="252.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="107" y1="252.0938" y2="252.0938"/><polygon fill="#181818" points="76,248.0938,66,252.0938,76,256.0938,72,252.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="72" y="234.0278">channel:send</text><polygon fill="#181818" points="207,277.2266,217,281.2266,207,285.2266,211,281.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="213" y1="281.2266" y2="281.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="72" y="276.1606">server:accept (yield)</text><polygon fill="#181818" points="370,306.3594,380,310.3594,370,314.3594,374,310.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="376" y1="310.3594" y2="310.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="226" y="305.2935">resume with port</text><polygon fill="#181818" points="230,335.4922,220,339.4922,230,343.4922,226,339.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="224" x2="381" y1="339.4922" y2="339.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="236" y="334.4263">client:connect (yield)</text><polygon fill="#181818" points="76,364.625,66,368.625,76,372.625,72,368.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70" x2="218" y1="368.625" y2="368.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="82" y="363.5591">resume with client</text><polygon fill="#181818" points="207,393.7578,217,397.7578,207,401.7578,211,397.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="213" y1="397.7578" y2="397.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="72" y="392.6919">client:receive (yield)</text><polygon fill="#181818" points="370,422.8906,380,426.8906,370,430.8906,374,426.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="376" y1="426.8906" y2="426.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="226" y="421.8247">resume connected</text><path d="M10,441.8906 L87,441.8906 L87,449.0234 L77,459.0234 L10,459.0234 L10,441.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="217.9297" style="stroke:#000000;stroke-width:1.5;" width="460" x="10" y="441.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="25" y="454.9575">loop</text><line style="stroke:#181818;stroke-width:1.0;" x1="382" x2="424" y1="480.1563" y2="480.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="424" x2="424" y1="480.1563" y2="493.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="383" x2="424" y1="493.1563" y2="493.1563"/><polygon fill="#181818" points="393,489.1563,383,493.1563,393,497.1563,389,493.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="389" y="475.0903">client:send</text><polygon fill="#181818" points="230,518.2891,220,522.2891,230,526.2891,226,522.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="224" x2="381" y1="522.2891" y2="522.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="236" y="517.2231">client:receive (yield)</text><polygon fill="#181818" points="76,547.4219,66,551.4219,76,555.4219,72,551.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70" x2="218" y1="551.4219" y2="551.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="82" y="546.356">resume with ping</text><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="107" y1="580.5547" y2="580.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="107" x2="107" y1="580.5547" y2="593.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="66" x2="107" y1="593.5547" y2="593.5547"/><polygon fill="#181818" points="76,589.5547,66,593.5547,76,597.5547,72,593.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="72" y="575.4888">client:send</text><polygon fill="#181818" points="207,618.6875,217,622.6875,207,626.6875,211,622.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="213" y1="622.6875" y2="622.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="72" y="617.6216">client:receive (yield)</text><polygon fill="#181818" points="370,647.8203,380,651.8203,370,655.8203,374,651.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="376" y1="651.8203" y2="651.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="226" y="646.7544">resmume with pong</text><!--MD5=[2df0f5314efee25f77c0c3df51e82455]
@startuml Client
participant "server task" as s
participant cosock as co
participant "client task" as c

co->c: resume
c->co: channel:receive(yield)
co->s: resume
s->s: bind
s->s: server:getsockname
s->s: channel:send
s->co: server:accept (yield)
co->c: resume with port
c->co: client:connect (yield)
co->s: resume with client
s->co: client:receive (yield)
co->c: resume connected
loop
    c->c: client:send
    c->co: client:receive (yield)
    co->s: resume with ping
    s->s: client:send
    s->co: client:receive (yield)
    co->c: resmume with pong
end
@enduml

PlantUML version 1.2022.6(Tue Jun 21 17:34:49 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>
